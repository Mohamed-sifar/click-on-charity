import{_ as y,A as x,r as p,F as u,S as m,a as w,o as c,c as F,w as I,b as t,d as h,n as _,e as d,v as n,f as b,g as B,t as g,i as C,j as U,h as f}from"./app-CEJBUcgw.js";var D={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_NAME:"Laravel"};const E={name:"BlogCURD",components:{AdminLayout:x},props:{blogs:Array},data(){return{publicPath:D.VITE_APP_URL||"/",form:p({mainImageUrl:"",mainImageFile:null,title:"",content:"",created_by:"",created_dte:""}),editForm:p({id:null,mainImageUrl:"",mainImageFile:null,title:"",content:"",created_by:"",created_dte:""})}},mounted(){this.$nextTick(()=>{$("#kt_datatable_dom_positioning").DataTable({language:{lengthMenu:"Show _MENU_"},dom:"<'row mb-2'<'col-sm-6 d-flex align-items-center justify-conten-start'l><'col-sm-6 d-flex align-items-center justify-content-end'f>><'table-responsive'tr><'row'<'col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start'i><'col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end'p>>"})})},methods:{handleImageChange(s,e){const i=e.target.files[0];if(i){const r=new FileReader;r.onload=l=>{s==="mainImage"?(this.form.mainImageUrl=l.target.result,this.form.mainImageFile=i):s==="editMainImage"&&(this.editForm.mainImageUrl=l.target.result,this.editForm.mainImageFile=i)},r.readAsDataURL(i)}},removeImage(s){s==="mainImage"?(this.form.mainImageUrl="",this.form.mainImageFile=null):s==="editMainImage"&&(this.editForm.mainImageUrl="",this.editForm.mainImageFile=null)},submitForm(){const s=new FormData;s.append("blog_file",this.form.mainImageFile),s.append("title",this.form.title),s.append("content",this.form.content),s.append("created_by",this.form.created_by),s.append("created_dte",this.form.created_dte),u.post("/admin/blogs",s,{onSuccess:()=>{this.resetForm(),this.closeModal("kt_modal_add_user"),m.fire({title:"Success!",text:"Blog added successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{window.location.reload()})},onError:e=>{let i="";Object.values(e).forEach(r=>{i+=`${r}<br>`}),m.fire({title:"Error!",html:i,icon:"error",confirmButtonText:"OK"})}})},editBlog(s){this.editForm.id=s.blog_id,this.editForm.title=s.title,this.editForm.content=s.content,this.editForm.created_by=s.created_by,this.editForm.created_dte=s.created_dte,this.editForm.mainImageUrl=`/storage/${s.image}`,this.$nextTick(()=>{$("#kt_modal_edit_user").modal("show")})},updateForm(){const s=new FormData;this.editForm.mainImageFile&&s.append("blog_file",this.editForm.mainImageFile),s.append("title",this.editForm.title),s.append("content",this.editForm.content),s.append("created_by",this.editForm.created_by),s.append("created_dte",this.editForm.created_dte),s.append("_method","PUT"),u.post(`/admin/blogs/${this.editForm.id}`,s,{onSuccess:()=>{this.resetEditForm(),this.closeModal("kt_modal_edit_user"),m.fire({title:"Success!",text:"Blog updated successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{window.location.reload()})},onError:e=>{let i="";Object.values(e).forEach(r=>{i+=`${r}<br>`}),m.fire({title:"Error!",html:i,icon:"error",confirmButtonText:"OK"})}})},resetForm(){this.form.mainImageFile=null,this.form.title="",this.form.content="",this.form.created_by="",this.form.created_dte=""},resetEditForm(){this.editForm.id=null,this.editForm.mainImageFile=null,this.editForm.title="",this.editForm.content="",this.editForm.created_by="",this.editForm.created_dte=""},closeModal(s){$(`#${s}`).modal("hide")},confirmDelete(s){m.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!"}).then(e=>{e.isConfirmed&&this.deleteBlog(s)})},deleteBlog(s){u.post(`/admin/blogs/${s}`,{onSuccess:()=>{m.fire({title:"Deleted!",text:"Blog has been deleted.",icon:"success",confirmButtonText:"OK"}).then(()=>{window.location.reload()})},onError:()=>{m.fire({title:"Error!",text:"There was an issue deleting the blog.",icon:"error",confirmButtonText:"OK"})}})}}},M={class:"container-xxl",id:"kt_content_container"},T={class:"row g-5 gx-xxl-8 mb-xxl-3"},S={class:"col-xxl-12"},V={class:"card"},A={class:"card-header border-0 pt-6"},j=t("h3",{class:"fw-bold m-0"},"Blog Main Details",-1),q={class:"card-toolbar"},O=t("div",{class:"d-flex justify-content-end","data-kt-user-table-toolbar":"base"},[t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_user"},[t("i",{class:"ki-duotone ki-plus fs-2"}),f(" Add Blog ")])],-1),P={class:"modal fade",id:"kt_modal_add_user",tabindex:"-1","aria-hidden":"true"},R={class:"modal-dialog modal-dialog-centered mw-650px"},K={class:"modal-content"},L={class:"modal-header",id:"kt_modal_add_user_header"},N=t("h2",{class:"fw-bold"},"Add Blog",-1),z=t("i",{class:"ki-duotone ki-cross fs-1"},[t("span",{class:"path1"}),t("span",{class:"path2"})],-1),Y=[z],G={class:"modal-body px-5 my-7"},H={class:"d-flex flex-column scroll-y px-5 px-lg-10",id:"kt_modal_add_user_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"true","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_user_header","data-kt-scroll-wrappers":"#kt_modal_add_user_scroll","data-kt-scroll-offset":"300px"},J={class:"fv-row mb-7"},Q=t("label",{class:"required fw-semibold fs-6 mb-2"},"Blog image",-1),W={class:"col-lg-4"},X={class:"btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip","data-bs-dismiss":"click",title:"Change avatar"},Z=t("i",{class:"ki-duotone ki-pencil fs-6"},null,-1),tt=t("i",{class:"ki-outline ki-cross fs-3"},null,-1),et=[tt],ot={class:"fv-row mb-7"},st=t("label",{class:"required fw-semibold fs-6 mb-2"},"Full Title",-1),lt={class:"fv-row mb-7"},at=t("label",{class:"required fw-semibold fs-6 mb-2"},"Blog content",-1),it={class:"fv-row mb-7"},dt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Created By",-1),nt={class:"fv-row mb-7"},rt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Created Date",-1),mt={class:"text-center pt-10"},ct=t("button",{type:"submit",class:"btn btn-primary","data-kt-users-modal-action":"submit"},[t("span",{class:"indicator-label"},"Submit"),t("span",{class:"indicator-progress"},[f("Please wait... "),t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})])],-1),_t={class:"modal fade",id:"kt_modal_edit_user",tabindex:"-1","aria-hidden":"true"},ut={class:"modal-dialog modal-dialog-centered mw-650px"},bt={class:"modal-content"},gt={class:"modal-header",id:"kt_modal_edit_user_header"},ft=t("h2",{class:"fw-bold"},"Edit Blog",-1),pt=t("i",{class:"ki-duotone ki-cross fs-1"},[t("span",{class:"path1"}),t("span",{class:"path2"})],-1),ht=[pt],vt={class:"modal-body px-5 my-7"},kt={class:"d-flex flex-column scroll-y px-5 px-lg-10",id:"kt_modal_edit_user_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"true","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_edit_user_header","data-kt-scroll-wrappers":"#kt_modal_edit_user_scroll","data-kt-scroll-offset":"300px"},yt={class:"fv-row mb-7"},xt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Blog image",-1),wt={class:"col-lg-4"},Ft={class:"btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip","data-bs-dismiss":"click",title:"Change avatar"},It=t("i",{class:"ki-duotone ki-pencil fs-6"},null,-1),Bt=t("i",{class:"ki-outline ki-cross fs-3"},null,-1),Ct=[Bt],Ut={class:"fv-row mb-7"},Dt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Full Title",-1),Et={class:"fv-row mb-7"},Mt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Blog content",-1),Tt={class:"fv-row mb-7"},St=t("label",{class:"required fw-semibold fs-6 mb-2"},"Created By",-1),Vt={class:"fv-row mb-7"},At=t("label",{class:"required fw-semibold fs-6 mb-2"},"Created Date",-1),jt={class:"text-center pt-10"},qt=t("button",{type:"submit",class:"btn btn-primary","data-kt-users-modal-action":"submit"},[t("span",{class:"indicator-label"},"Update"),t("span",{class:"indicator-progress"},[f("Please wait... "),t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})])],-1),Ot={class:"card-body py-4"},Pt={id:"kt_datatable_dom_positioning",class:"table table-striped table-row-bordered gy-5 gs-7 border rounded"},Rt=t("thead",null,[t("tr",{class:"fw-bold fs-6 text-gray-800 px-7"},[t("th",null,"Title"),t("th",null,"Content"),t("th",{class:"min-w-150px"},"Date"),t("th",null,"Image"),t("th",null,"Actions")])],-1),Kt=["src"],Lt=["onClick"],Nt=["onClick"];function zt(s,e,i,r,l,a){const v=w("admin-layout");return c(),F(v,null,{default:I(()=>[t("div",M,[t("div",T,[t("div",S,[t("div",V,[t("div",A,[j,t("div",q,[O,t("div",P,[t("div",R,[t("div",K,[t("div",L,[N,t("div",{class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:e[0]||(e[0]=o=>a.closeModal("kt_modal_add_user"))},Y)]),t("div",G,[t("form",{onSubmit:e[8]||(e[8]=h((...o)=>a.submitForm&&a.submitForm(...o),["prevent"])),id:"kt_modal_add_user_form",class:"form"},[t("div",H,[t("div",J,[Q,t("div",W,[t("div",{class:"image-input image-input-outline","data-kt-image-input":"true",style:_({backgroundImage:`url(${l.form.mainImageUrl||"svg/avatars/blank.svg"})`})},[t("div",{class:"image-input-wrapper w-125px h-125px",style:_({backgroundImage:`url(${l.form.mainImageUrl||"svg/avatars/blank.svg"})`})},null,4),t("label",X,[Z,t("input",{type:"file",ref:"mainImage",onChange:e[1]||(e[1]=o=>a.handleImageChange("mainImage",o))},null,544)]),t("span",{class:"btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow",onClick:e[2]||(e[2]=o=>a.removeImage("mainImage")),"data-kt-image-input-action":"remove","data-bs-toggle":"tooltip","data-bs-dismiss":"click",title:"Remove avatar"},et)],4)])]),t("div",ot,[st,d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.form.title=o),type:"text",name:"title",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Full title"},null,512),[[n,l.form.title]])]),t("div",lt,[at,d(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.form.content=o),name:"content",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Blog content"},null,512),[[n,l.form.content]])]),t("div",it,[dt,d(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.form.created_by=o),name:"created_by",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Created By"},null,512),[[n,l.form.created_by]])]),t("div",nt,[rt,d(t("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=o=>l.form.created_dte=o),name:"created_dte",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Created Date"},null,512),[[n,l.form.created_dte]])])]),t("div",mt,[t("button",{type:"button",class:"btn btn-light me-3",onClick:e[7]||(e[7]=o=>a.closeModal("kt_modal_add_user"))},"Discard"),ct])],32)])])])]),t("div",_t,[t("div",ut,[t("div",bt,[t("div",gt,[ft,t("div",{class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:e[9]||(e[9]=o=>a.closeModal("kt_modal_edit_user"))},ht)]),t("div",vt,[t("form",{onSubmit:e[17]||(e[17]=h((...o)=>a.updateForm&&a.updateForm(...o),["prevent"])),id:"kt_modal_edit_user_form",class:"form"},[t("div",kt,[t("div",yt,[xt,t("div",wt,[t("div",{class:"image-input image-input-outline","data-kt-image-input":"true",style:_({backgroundImage:`url(${l.editForm.mainImageUrl||"svg/avatars/blank.svg"})`})},[t("div",{class:"image-input-wrapper w-125px h-125px",style:_({backgroundImage:`url(${l.editForm.mainImageUrl||"svg/avatars/blank.svg"})`})},null,4),t("label",Ft,[It,t("input",{type:"file",ref:"mainImage",onChange:e[10]||(e[10]=o=>a.handleImageChange("editMainImage",o))},null,544)]),t("span",{class:"btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow",onClick:e[11]||(e[11]=o=>a.removeImage("editMainImage")),"data-kt-image-input-action":"remove","data-bs-toggle":"tooltip","data-bs-dismiss":"click",title:"Remove avatar"},Ct)],4)])]),t("div",Ut,[Dt,d(t("input",{"onUpdate:modelValue":e[12]||(e[12]=o=>l.editForm.title=o),type:"text",name:"title",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Full title"},null,512),[[n,l.editForm.title]])]),t("div",Et,[Mt,d(t("textarea",{"onUpdate:modelValue":e[13]||(e[13]=o=>l.editForm.content=o),name:"content",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Blog content"},null,512),[[n,l.editForm.content]])]),t("div",Tt,[St,d(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>l.editForm.created_by=o),name:"created_by",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Created By"},null,512),[[n,l.editForm.created_by]])]),t("div",Vt,[At,d(t("input",{"onUpdate:modelValue":e[15]||(e[15]=o=>l.editForm.created_dte=o),name:"created_dte",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Created Date"},null,512),[[n,l.editForm.created_dte]])])]),t("div",jt,[t("button",{type:"button",class:"btn btn-light me-3",onClick:e[16]||(e[16]=o=>a.closeModal("kt_modal_edit_user"))},"Discard"),qt])],32)])])])])])]),t("div",Ot,[t("table",Pt,[Rt,t("tbody",null,[(c(!0),b(U,null,B(i.blogs,o=>(c(),b("tr",{key:o.blog_id},[t("td",null,g(o.title),1),t("td",null,g(o.content),1),t("td",null,g(o.created_dte),1),t("td",null,[o.image?(c(),b("img",{key:0,src:`${l.publicPath}storage/${o.image}`,alt:"Blog Image",width:"100"},null,8,Kt)):C("",!0)]),t("td",null,[t("button",{class:"btn btn-sm btn-primary",onClick:k=>a.editBlog(o)},"Edit",8,Lt),t("button",{class:"btn btn-sm btn-danger",onClick:k=>a.confirmDelete(o.blog_id)},"Delete",8,Nt)])]))),128))])])])])])])])]),_:1})}const Gt=y(E,[["render",zt]]);export{Gt as default};
