import{_ as k,A as w,r as f,F as p,S as m,a as x,o as _,c as F,w as I,b as t,d as g,n as u,e as n,v as d,f as h,g as U,t as b,h as c,i as A,j as D}from"./app-CEJBUcgw.js";var C={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_NAME:"Laravel"};const T={name:"BlogCURD",components:{AdminLayout:w},props:{activity:Array},data(){return{publicPath:C.VITE_APP_URL||"/",form:f({mainImageUrl:"",mainImageFile:null,activity_content:"",start_time:"",date:"",phone:"",location:""}),editForm:f({id:null,mainImageUrl:"",mainImageFile:null,activity_title:"",activity_content:"",start_time:"",date:"",phone:"",location:""})}},mounted(){this.$nextTick(()=>{$("#kt_datatable_dom_positioning").DataTable({language:{lengthMenu:"Show _MENU_"},dom:"<'row mb-2'<'col-sm-6 d-flex align-items-center justify-conten-start'l><'col-sm-6 d-flex align-items-center justify-content-end'f>><'table-responsive'tr><'row'<'col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start'i><'col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end'p>>"})})},methods:{handleImageChange(i,e){const a=e.target.files[0];if(a){const r=new FileReader;r.onload=s=>{i==="mainImage"?(this.form.mainImageUrl=s.target.result,this.form.mainImageFile=a):i==="editMainImage"&&(this.editForm.mainImageUrl=s.target.result,this.editForm.mainImageFile=a)},r.readAsDataURL(a)}},removeImage(i){i==="mainImage"?(this.form.mainImageUrl="",this.form.mainImageFile=null):i==="editMainImage"&&(this.editForm.mainImageUrl="",this.editForm.mainImageFile=null)},submitForm(){const i=new FormData;i.append("activity_image",this.form.mainImageFile),i.append("activity_title",this.form.activity_title),i.append("activity_content",this.form.activity_content),i.append("start_time",this.form.start_time),i.append("date",this.form.date),i.append("phone",this.form.phone),i.append("location",this.form.location),p.post("/admin/activity",i,{onSuccess:()=>{this.resetForm(),this.closeModal("kt_modal_add_user"),m.fire({title:"Success!",text:"Activity added successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{window.location.reload()})},onError:e=>{let a="";Object.values(e).forEach(r=>{a+=`${r}<br>`}),m.fire({title:"Error!",html:a,icon:"error",confirmButtonText:"OK"})}})},editBlog(i){this.editForm.id=i.activity_id,this.editForm.activity_title=i.activity_title,this.editForm.activity_content=i.activity_content,this.editForm.start_time=i.start_time,this.editForm.date=i.date,this.editForm.phone=i.phone,this.editForm.location=i.location,this.editForm.mainImageUrl=`/storage/${i.activity_image}`,this.$nextTick(()=>{$("#kt_modal_edit_user").modal("show")})},updateForm(){const i=new FormData;this.editForm.mainImageFile&&i.append("activity_image",this.editForm.mainImageFile),i.append("activity_title",this.editForm.activity_title),i.append("activity_content",this.editForm.activity_content),i.append("start_time",this.editForm.start_time),i.append("date",this.editForm.date),i.append("location",this.editForm.location),i.append("phone",this.editForm.phone),i.append("_method","PUT"),console.log(`Sending update request for activity ID: ${this.editForm.id}`),p.post(`/admin/activity/${this.editForm.id}`,i,{onSuccess:()=>{this.resetEditForm(),this.closeModal("kt_modal_edit_user"),m.fire({title:"Success!",text:"Activity updated successfully.",icon:"success",confirmButtonText:"OK"}).then(()=>{window.location.reload()})},onError:e=>{let a="";Object.values(e).forEach(r=>{a+=`${r}<br>`}),m.fire({title:"Error!",html:a,icon:"error",confirmButtonText:"OK"})}})},resetForm(){this.form.activity_image=null,this.form.activity_title="",this.form.activity_content="",this.form.start_time="",this.form.date="",this.form.phone="",this.form.location=""},resetEditForm(){this.editForm.id=null,this.editForm.activity_image=null,this.editForm.activity_title="",this.editForm.activity_content="",this.editForm.start_time="",this.editForm.date="",this.editForm.phone="",this.editForm.location=""},closeModal(i){$(`#${i}`).modal("hide")},confirmDelete(i){m.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!"}).then(e=>{e.isConfirmed&&this.deleteBlog(i)})},deleteBlog(i){p.post(`/admin/activity/${i}`,{onSuccess:()=>{m.fire({title:"Deleted!",text:"Activity has been deleted.",icon:"success",confirmButtonText:"OK"}).then(()=>{window.location.reload()})},onError:()=>{m.fire({title:"Error!",text:"There was an issue deleting the activity.",icon:"error",confirmButtonText:"OK"})}})}}},S={class:"container-xxl",id:"kt_content_container"},E={class:"row g-5 gx-xxl-8 mb-xxl-3"},M={class:"col-xxl-12"},B={class:"card"},V={class:"card-header border-0 pt-6"},P=t("h3",{class:"fw-bold m-0"},"Activity Main Details",-1),q={class:"card-toolbar"},j=t("div",{class:"d-flex justify-content-end","data-kt-user-table-toolbar":"base"},[t("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_add_user"},[t("i",{class:"ki-duotone ki-plus fs-2"}),c(" Add Activity ")])],-1),L={class:"modal fade",id:"kt_modal_add_user",tabindex:"-1","aria-hidden":"true"},O={class:"modal-dialog modal-dialog-centered mw-650px"},R={class:"modal-content"},K={class:"modal-header",id:"kt_modal_add_user_header"},N=t("h2",{class:"fw-bold"},"Add Activity",-1),z=t("i",{class:"ki-duotone ki-cross fs-1"},[t("span",{class:"path1"}),t("span",{class:"path2"})],-1),Y=[z],G={class:"modal-body px-5 my-7"},H={class:"d-flex flex-column scroll-y px-5 px-lg-10",id:"kt_modal_add_user_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"true","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_user_header","data-kt-scroll-wrappers":"#kt_modal_add_user_scroll","data-kt-scroll-offset":"300px"},J={class:"fv-row mb-7"},Q=t("label",{class:"d-block fw-semibold fs-6 mb-5"},"Activity Image",-1),W={class:"col-lg-4"},X={class:"btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip","data-bs-dismiss":"click",title:"Change avatar"},Z=t("i",{class:"ki-duotone ki-pencil fs-6"},null,-1),tt=t("i",{class:"ki-outline ki-cross fs-3"},null,-1),et=[tt],ot={class:"fv-row mb-7"},it=t("label",{class:"required fw-semibold fs-6 mb-2"},"Full Title",-1),st={class:"fv-row mb-7"},lt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Activity content",-1),at={class:"fv-row mb-7"},nt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Start Time",-1),dt={class:"fv-row mb-7"},rt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Phone",-1),mt={class:"fv-row mb-7"},ct=t("label",{class:"required fw-semibold fs-6 mb-2"},"Location",-1),_t={class:"fv-row mb-7"},ut=t("label",{class:"required fw-semibold fs-6 mb-2"},"Date",-1),bt={class:"text-center pt-10"},pt=t("button",{type:"submit",class:"btn btn-primary","data-kt-users-modal-action":"submit"},[t("span",{class:"indicator-label"},"Submit"),t("span",{class:"indicator-progress"},[c("Please wait... "),t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})])],-1),ht={class:"modal fade",id:"kt_modal_edit_user",tabindex:"-1","aria-hidden":"true"},ft={class:"modal-dialog modal-dialog-centered mw-650px"},gt={class:"modal-content"},vt={class:"modal-header",id:"kt_modal_edit_user_header"},yt=t("h2",{class:"fw-bold"},"Edit Activity",-1),kt=t("i",{class:"ki-duotone ki-cross fs-1"},[t("span",{class:"path1"}),t("span",{class:"path2"})],-1),wt=[kt],xt={class:"modal-body px-5 my-7"},Ft={class:"d-flex flex-column scroll-y px-5 px-lg-10",id:"kt_modal_edit_user_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"true","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_edit_user_header","data-kt-scroll-wrappers":"#kt_modal_edit_user_scroll","data-kt-scroll-offset":"300px"},It={class:"fv-row mb-7"},Ut=t("label",{class:"d-block fw-semibold fs-6 mb-5"},"Activity Image",-1),At={class:"col-lg-4"},Dt={class:"btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow","data-kt-image-input-action":"change","data-bs-toggle":"tooltip","data-bs-dismiss":"click",title:"Change avatar"},Ct=t("i",{class:"ki-duotone ki-pencil fs-6"},null,-1),Tt=t("i",{class:"ki-outline ki-cross fs-3"},null,-1),St=[Tt],Et={class:"fv-row mb-7"},Mt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Full Title",-1),Bt={class:"fv-row mb-7"},Vt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Activity content",-1),Pt={class:"fv-row mb-7"},qt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Start Time",-1),jt={class:"fv-row mb-7"},Lt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Phone",-1),Ot={class:"fv-row mb-7"},Rt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Location",-1),Kt={class:"fv-row mb-7"},Nt=t("label",{class:"required fw-semibold fs-6 mb-2"},"Date",-1),zt={class:"text-center pt-10"},Yt=t("button",{type:"submit",class:"btn btn-primary","data-kt-users-modal-action":"submit"},[t("span",{class:"indicator-label"},"Update"),t("span",{class:"indicator-progress"},[c("Please wait... "),t("span",{class:"spinner-border spinner-border-sm align-middle ms-2"})])],-1),Gt={class:"card-body py-4"},Ht={id:"kt_datatable_dom_positioning",class:"table table-striped table-row-bordered gy-5 gs-7 border rounded"},Jt=t("thead",null,[t("tr",{class:"fw-bold fs-6 text-gray-800 px-7"},[t("th",null,"Title"),t("th",null,"Content"),t("th",{class:"min-w-150px"},"Date"),t("th",null,"Image"),t("th",null,"Actions")])],-1),Qt=t("br",null,null,-1),Wt=["src"],Xt=["onClick"],Zt=["onClick"];function $t(i,e,a,r,s,l){const v=x("admin-layout");return _(),F(v,null,{default:I(()=>[t("div",S,[t("div",E,[t("div",M,[t("div",B,[t("div",V,[P,t("div",q,[j,t("div",L,[t("div",O,[t("div",R,[t("div",K,[N,t("div",{class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:e[0]||(e[0]=o=>l.closeModal("kt_modal_add_user"))},Y)]),t("div",G,[t("form",{onSubmit:e[10]||(e[10]=g((...o)=>l.submitForm&&l.submitForm(...o),["prevent"])),id:"kt_modal_add_user_form",class:"form"},[t("div",H,[t("div",J,[Q,t("div",W,[t("div",{class:"image-input image-input-outline","data-kt-image-input":"true",style:u({backgroundImage:`url(${s.form.mainImageUrl||"svg/avatars/blank.svg"})`})},[t("div",{class:"image-input-wrapper w-125px h-125px",style:u({backgroundImage:`url(${s.form.mainImageUrl||"svg/avatars/blank.svg"})`})},null,4),t("label",X,[Z,t("input",{type:"file",ref:"mainImage",onChange:e[1]||(e[1]=o=>l.handleImageChange("mainImage",o))},null,544)]),t("span",{class:"btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow",onClick:e[2]||(e[2]=o=>l.removeImage("mainImage")),"data-kt-image-input-action":"remove","data-bs-toggle":"tooltip","data-bs-dismiss":"click",title:"Remove avatar"},et)],4)])]),t("div",ot,[it,n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.form.activity_title=o),type:"text",name:"activity_title",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Full title"},null,512),[[d,s.form.activity_title]])]),t("div",st,[lt,n(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.form.activity_content=o),name:"activity_content",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Activity content"},null,512),[[d,s.form.activity_content]])]),t("div",at,[nt,n(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>s.form.start_time=o),name:"start_time",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Start Time"},null,512),[[d,s.form.start_time]])]),t("div",dt,[rt,n(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.form.phone=o),name:"phone",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Phone"},null,512),[[d,s.form.phone]])]),t("div",mt,[ct,n(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.form.location=o),name:"location",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Location"},null,512),[[d,s.form.location]])]),t("div",_t,[ut,n(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=o=>s.form.date=o),name:"date",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Date"},null,512),[[d,s.form.date]])])]),t("div",bt,[t("button",{type:"button",class:"btn btn-light me-3",onClick:e[9]||(e[9]=o=>l.closeModal("kt_modal_add_user"))},"Discard"),pt])],32)])])])]),t("div",ht,[t("div",ft,[t("div",gt,[t("div",vt,[yt,t("div",{class:"btn btn-icon btn-sm btn-active-icon-primary",onClick:e[11]||(e[11]=o=>l.closeModal("kt_modal_edit_user"))},wt)]),t("div",xt,[t("form",{onSubmit:e[21]||(e[21]=g((...o)=>l.updateForm&&l.updateForm(...o),["prevent"])),id:"kt_modal_edit_user_form",class:"form"},[t("div",Ft,[t("div",It,[Ut,t("div",At,[t("div",{class:"image-input image-input-outline","data-kt-image-input":"true",style:u({backgroundImage:`url(${s.editForm.mainImageUrl||"svg/avatars/blank.svg"})`})},[t("div",{class:"image-input-wrapper w-125px h-125px",style:u({backgroundImage:`url(${s.editForm.mainImageUrl||"svg/avatars/blank.svg"})`})},null,4),t("label",Dt,[Ct,t("input",{type:"file",ref:"mainImage",onChange:e[12]||(e[12]=o=>l.handleImageChange("editMainImage",o))},null,544)]),t("span",{class:"btn btn-icon btn-circle btn-color-muted btn-active-color-primary w-25px h-25px bg-body shadow",onClick:e[13]||(e[13]=o=>l.removeImage("editMainImage")),"data-kt-image-input-action":"remove","data-bs-toggle":"tooltip","data-bs-dismiss":"click",title:"Remove avatar"},St)],4)])]),t("div",Et,[Mt,n(t("input",{"onUpdate:modelValue":e[14]||(e[14]=o=>s.editForm.activity_title=o),type:"text",name:"activity_title",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Full title"},null,512),[[d,s.editForm.activity_title]])]),t("div",Bt,[Vt,n(t("textarea",{"onUpdate:modelValue":e[15]||(e[15]=o=>s.editForm.activity_content=o),name:"activity_content",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Activity content"},null,512),[[d,s.editForm.activity_content]])]),t("div",Pt,[qt,n(t("input",{"onUpdate:modelValue":e[16]||(e[16]=o=>s.editForm.start_time=o),name:"start_time",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Start Time"},null,512),[[d,s.editForm.start_time]])]),t("div",jt,[Lt,n(t("input",{"onUpdate:modelValue":e[17]||(e[17]=o=>s.editForm.phone=o),name:"phone",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Phone"},null,512),[[d,s.editForm.phone]])]),t("div",Ot,[Rt,n(t("input",{"onUpdate:modelValue":e[18]||(e[18]=o=>s.editForm.location=o),name:"location",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Location"},null,512),[[d,s.editForm.location]])]),t("div",Kt,[Nt,n(t("input",{type:"date","onUpdate:modelValue":e[19]||(e[19]=o=>s.editForm.date=o),name:"date",class:"form-control form-control-solid mb-3 mb-lg-0",placeholder:"Date"},null,512),[[d,s.editForm.date]])])]),t("div",zt,[t("button",{type:"button",class:"btn btn-light me-3",onClick:e[20]||(e[20]=o=>l.closeModal("kt_modal_edit_user"))},"Discard"),Yt])],32)])])])])])]),t("div",Gt,[t("table",Ht,[Jt,t("tbody",null,[(_(!0),h(D,null,U(a.activity,o=>(_(),h("tr",{key:o.activity_id},[t("td",null,b(o.activity_title),1),t("td",null,b(o.activity_content),1),t("td",null,[c(b(o.date),1),Qt,c(b(o.start_time),1)]),t("td",null,[o.activity_image?(_(),h("img",{key:0,src:`${s.publicPath}storage/${o.activity_image}`,alt:"Activity Image",width:"100"},null,8,Wt)):A("",!0)]),t("td",null,[t("button",{class:"btn btn-sm btn-primary",onClick:y=>l.editBlog(o)},"Edit",8,Xt),t("button",{class:"btn btn-sm btn-danger",onClick:y=>l.confirmDelete(o.activity_id)},"Delete",8,Zt)])]))),128))])])])])])])])]),_:1})}const ee=k(T,[["render",$t]]);export{ee as default};
